<!doctype html>
<html lang="es">
<head>
<meta charset="utf-8">
<meta name="viewport" content="width=device-width,initial-scale=1">
<title>Guess Who</title>
<link rel="stylesheet" href="styles.css">
<style>
  body.page-dark {
    background-color: #1a1a1a;
    color: #eee;
    font-family: "Segoe UI", sans-serif;
    text-align: center;
    margin: 0;
    padding: 0;
  }

  .container {
    max-width: 800px;
    margin: 40px auto;
    padding: 30px;
  }

  .title-red {
    color: #d63c3c;
    font-size: 2rem;
    margin-bottom: 20px;
  }

  .hint {
    color: #aaa;
    font-size: 1.1rem;
    margin-bottom: 30px;
  }

  .filter {
    margin: 12px auto;
    display: flex;
    justify-content: center;
    align-items: center;
    gap: 10px;
  }

  select {
    padding: 6px 8px;
    border-radius: 5px;
    background-color: #2a2a2a;
    color: white;
    border: 1px solid #d63c3c;
  }

  select:disabled {
    opacity: 0.5;
  }

  button {
    background-color: #d63c3c;
    color: white;
    border: none;
    border-radius: 6px;
    padding: 8px 16px;
    cursor: pointer;
    font-size: 1rem;
    transition: 0.2s;
  }

  button:hover:not(:disabled) {
    background-color: #e25555;
  }

  button:disabled {
    opacity: 0.6;
    cursor: not-allowed;
  }

  #finalGuess {
    margin-top: 40px;
  }

  #guessInput {
    padding: 6px 10px;
    border-radius: 5px;
    border: 1px solid #d63c3c;
    background-color: #2a2a2a;
    color: white;
    margin-right: 10px;
  }

  #attemptsLog {
    margin-top: 25px;
    text-align: left;
  }

  /* Alerta centrada */
  .alert {
    position: fixed;
    top: 50%;
    left: 50%;
    transform: translate(-50%, -50%);
    background-color: #2a2a2a;
    color: white;
    border: 2px solid #d63c3c;
    padding: 20px 30px;
    border-radius: 10px;
    z-index: 1000;
    box-shadow: 0 0 10px rgba(214, 60, 60, 0.5);
  }

</style>
</head>
<body class="page-dark">
<main class="container" role="main" aria-live="polite">
<h1 tabindex="0" class="title-red">AdivinÃ¡ quiÃ©n soy ðŸ‘€</h1>
<p class="hint">Pista: mi apodo empieza con <strong>T</strong></p>

<!-- Filtros -->
<div id="filters"></div>

<!-- Registro de intentos -->
<ol id="attemptsLog"></ol>
<div id="tries" aria-live="polite"></div>
<div id="finalMsg" role="status" aria-live="polite"></div>

<!-- Caja de adivinar el nombre -->
<div id="finalGuess">
  <h2>IntentÃ¡ adivinar mi nombre</h2>
  <label for="guessInput">Introduzca su respuesta final:</label>
  <input id="guessInput" type="text"/>
  <button id="guessBtn">Enviar</button>
</div>

</main>

<script>
const MAX_ATTEMPTS = 10;
let attempts = 0;
const attemptsLog = document.getElementById('attemptsLog');
const triesEl = document.getElementById('tries');
const finalMsg = document.getElementById('finalMsg');
const guessBtn = document.getElementById('guessBtn');

const correctData = {
  "Edad":16,
  "Color de pelo":["rubio","castaÃ±o claro"],
  "Materia favorita":"Historia",
  "Barrio":"Boedo",
  "Comida favorita":"Milanesa",
  "Cantante favorito":"Duki",
  "Bebida favorita":"Agua tonica",
  "Deporte favorito":"BÃ¡squet"
};

const filters = [
  "Edad","Color de pelo","Materia favorita","Barrio",
  "Comida favorita","Cantante favorito","Bebida favorita","Deporte favorito"
];

const options = {
  "Edad":[15,16,17,18,19,20,21,22,23,24],
  "Color de pelo":["Rubio","CastaÃ±o claro","CastaÃ±o oscuro","Negro","Pelirrojo","Gris","Azul","Verde","Rosa","Morado"],
  "Materia favorita":["Historia","MatemÃ¡tica","Lengua","InglÃ©s","GeografÃ­a","Base de datos","Proyecto informÃ¡tico","LÃ³gica computacional","Yiye","Cogido"],
  "Barrio":["Boedo","Palermo","Recoleta","Belgrano","Caballito","San Telmo","La Boca","Monserrat","Flores","Almagro"],
  "Comida favorita":["Milanesa","Pizza","Hamburguesa","Sushi","Tacos","Empanadas","Ensalada","Pasta","Helado","Asado"],
  "Cantante favorito":["Duki","KHEA","Cazzu","Trueno","Nicki Nicole","Rusherking","Neo Pistea","Seven Kayne","Bizarrap","Tiago PZK"],
  "Bebida favorita":["Agua tonica","Agua","Coca-Cola","Fanta","Sprite","Jugo de naranja","CafÃ©","TÃ©","Leche","Red Bull"],
  "Deporte favorito":["BÃ¡squet","FÃºtbol","Tenis","NataciÃ³n","Handball","VÃ³ley","Hockey","Boxeo","Rugby","Atletismo"]
};

function updateTries() {
  triesEl.textContent = 'Intentos: ' + attempts + ' / ' + MAX_ATTEMPTS;
}

function createFilters() {
  const filtersDiv = document.getElementById('filters');
  filters.forEach(f => {
    const div = document.createElement('div'); div.className='filter';
    const label = document.createElement('label'); label.textContent=f+":"; 
    const sel = document.createElement('select');
    sel.innerHTML='<option value="">Seleccione...</option>';
    options[f].forEach(o=>{ sel.innerHTML+='<option value="'+o+'">'+o+'</option>'; });
    const resultSpan=document.createElement('span'); resultSpan.className='filter-result';

    sel.addEventListener('change',()=>{
      if(sel.value==='') return;
      attempts++;
      updateTries();
      let userVal=sel.value.toLowerCase();
      let correctVal=correctData[f];
      let isYes=false;

      if(Array.isArray(correctVal)) isYes=correctVal.some(c=>c.toLowerCase()===userVal);
      else isYes=correctVal.toString().toLowerCase()===userVal;

      const li=document.createElement('li');
      li.textContent=f+': '+sel.value+' â†’ '+(isYes?'âœ… SÃ­':'âŒ No'); 
      attemptsLog.appendChild(li);

      sel.disabled=true;
      resultSpan.textContent=isYes?'âœ…':'âŒ';
      resultSpan.style.marginLeft='8px';
      resultSpan.style.fontWeight='bold';
      resultSpan.style.color=isYes?'lightgreen':'tomato';
    });

    div.appendChild(label);
    div.appendChild(sel);
    div.appendChild(resultSpan);
    filtersDiv.appendChild(div);
  });
}

createFilters();
updateTries();

// BotÃ³n de adivinar nombre
guessBtn.addEventListener('click',()=>{
  let val=document.getElementById('guessInput').value.toLowerCase().trim();
  const CORRECT_NAMES=['fran','francisco','francisco barreiro'];
  const ok=CORRECT_NAMES.some(n=>val.includes(n));

  if(ok){
    window.location.href='feliz.html';
  } else {
    guessBtn.disabled = true;
    const alertBox = document.createElement('div');
    alertBox.className = 'alert';
    alertBox.innerHTML = `
      <p><strong>Ay, le pifiaste ðŸ˜…</strong><br>DeberÃ¡s volver a jugar</p>
      <button onclick="location.reload()">Volver a jugar</button>
    `;
    document.body.appendChild(alertBox);
  }
});
</script>
</body>
</html>
