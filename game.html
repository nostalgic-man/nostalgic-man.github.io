<!doctype html>
<html lang="es">
<head>
<meta charset="utf-8">
<meta name="viewport" content="width=device-width,initial-scale=1">
<title>Guess Who</title>
<link rel="stylesheet" href="styles.css">
</head>
<body class="page-dark">
<main class="container" role="main" aria-live="polite">
<h1 tabindex="0" class="title-red">AdivinÃ¡ quiÃ©n soy ðŸ‘€</h1>
<p class="hint">Pista: su apodo empieza con <strong>T</strong></p>

<!-- Filtros -->
<div id="filters"></div>

<!-- Registro de intentos -->
<ol id="attemptsLog"></ol>
<div id="tries" aria-live="polite"></div>
<div id="finalMsg" role="status" aria-live="polite"></div>

<!-- Caja de adivinar el nombre (siempre visible) -->
<div id="finalGuess">
  <h2>IntentÃ¡ adivinar mi nombre</h2>
  <label for="guessInput">Introduzca su respuesta final:</label>
  <input id="guessInput" type="text"/>
  <button id="guessBtn">Enviar</button>
</div>

</main>

<script>
const MAX_ATTEMPTS=10;
let attempts=0;
const attemptsLog=document.getElementById('attemptsLog');
const triesEl=document.getElementById('tries');
const finalMsg=document.getElementById('finalMsg');

const correctData={
    "Edad":16,
    "Color de pelo":["rubio","castaÃ±o claro"],
    "Materia favorita":"Historia",
    "Barrio":"Boedo",
    "Comida favorita":"Milanesa",
    "Cantante favorito":"Duki",
    "Bebida favorita":"Agua tonica",
    "Deporte favorito":"BÃ¡squet"
};

const filters=["Edad","Color de pelo","Materia favorita","Barrio","Comida favorita","Cantante favorito","Bebida favorita","Deporte favorito"];
const options={
    "Edad":[15,16,17,18,19,20,21,22,23,24],
    "Color de pelo":["Rubio","CastaÃ±o claro","CastaÃ±o oscuro","Negro","Pelirrojo","Gris","Azul","Verde","Rosa","Morado"],
    "Materia favorita":["Historia","MatemÃ¡tica","Lengua","InglÃ©s","GeografÃ­a","Base de datos","Proyecto informÃ¡tico","LÃ³gica computacional","Yiye","Cogido"],
    "Barrio":["Boedo","Palermo","Recoleta","Belgrano","Caballito","San Telmo","La Boca","Monserrat","Flores","Almagro"],
    "Comida favorita":["Milanesa","Pizza","Hamburguesa","Sushi","Tacos","Empanadas","Ensalada","Pasta","Helado","Asado"],
    "Cantante favorito":["Duki","KHEA","Cazzu","Trueno","Nicki Nicole","Rusherking","Neo Pistea","Seven Kayne","Bizarrap","Tiago PZK"],
    "Bebida favorita":["Agua tonica","Agua","Coca-Cola","Fanta","Sprite","Jugo de naranja","CafÃ©","TÃ©","Leche","Red Bull"],
    "Deporte favorito":["BÃ¡squet","FÃºtbol","Tenis","NataciÃ³n","Handball","VÃ³ley","Hockey","Boxeo","Rugby","Atletismo"]
};

// Actualiza contador de intentos
function updateTries(){ triesEl.textContent='Intentos: '+attempts+' / '+MAX_ATTEMPTS; }

// Crea filtros con opciones
function createFilters(){
    const filtersDiv=document.getElementById('filters');
    filters.forEach(f=>{
        const div=document.createElement('div'); div.className='filter';
        const label=document.createElement('label'); label.textContent=f+":"; div.appendChild(label);
        const sel=document.createElement('select'); sel.innerHTML='<option value="">Seleccione...</option>';
        options[f].forEach(o=>{ sel.innerHTML+='<option value="'+o+'">'+o+'</option>'; });
        const resultSpan=document.createElement('span'); resultSpan.className='filter-result';
        sel.addEventListener('change',()=>{
            if(sel.value==='') return;
            attempts++;
            updateTries();
            let userVal=sel.value.toLowerCase();
            let correctVal=correctData[f];
            let isYes=false;
            if(Array.isArray(correctVal)) isYes=correctVal.some(c=>c.toLowerCase()===userVal);
            else isYes=correctVal.toString().toLowerCase()===userVal;
            const li=document.createElement('li'); li.textContent=f+': '+sel.value+' â†’ '+(isYes?'SÃ­':'No'); 
            attemptsLog.appendChild(li);
            sel.disabled=true;
            resultSpan.textContent=isYes?'SÃ­':'No';
        });
        div.appendChild(sel);
        div.appendChild(resultSpan);
        filtersDiv.appendChild(div);
    });
}

// InicializaciÃ³n
createFilters();
updateTries();

// BotÃ³n de adivinar nombre
document.getElementById('guessBtn').addEventListener('click',()=>{
  let val=document.getElementById('guessInput').value.toLowerCase().trim();
  const CORRECT_NAMES=['fran','francisco','francisco barreiro'];
  const ok=CORRECT_NAMES.some(n=>val.includes(n));
  if(ok){ window.location.href='feliz.html'; }
  else{
    finalMsg.innerHTML='<strong>Ay, le pifiaste, pero podes volver a intentar</strong><br>';
    const btn=document.createElement('button'); btn.textContent='Volver a jugar'; 
    btn.addEventListener('click',()=>location.reload());
    finalMsg.appendChild(btn);
  }
});
</script>
</body>
</html>
